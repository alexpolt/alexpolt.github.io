<!DOCTYPE html>
<HTML>

<HEAD>
  <title>WEBGL Samples - Alexandr Poltavsky, software developer</title>

  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta http-equiv="Cache-Control" content="no-store" />

  <link rel="stylesheet" type="text/css" href="css/common.css" />
  <link rel="stylesheet" href="highlight/styles/hybrid.css">
</HEAD>

<BODY> 
<div class="shader" id="shader0" js="js/webgl0.js" fn="webgl0">
<ul><li class="canvas">Canvas</li><li class="vs">VS</li><li class="ps">PS</li></ul>
<canvas class="canvas"></canvas>
<textarea class="vs" spellcheck="false">
#version 300 es

layout(location=0) in vec2 vin;
layout(location=1) in vec2 uvin;

out vec2 uv;

uniform float t;

void main() {

  mat2 m = mat2(cos(t), sin(t), -sin(t), cos(t));

  uv = uvin;

  gl_Position = vec4( vec2(2.0*vin-1.0) * m, 0,1);
}
</textarea>
<textarea class="ps" spellcheck="false">
#version 300 es

precision highp float;

in vec2 uv;

uniform float t;

layout(location=0) out vec4 color;

void main() {

  vec2 uvdx = dFdx( uv );
  vec2 uvdy = dFdy( uv );

  float d = uvdx.x*uvdy.y-uvdx.y*uvdy.x;

  if( d != 0.0 ) d = 1.0 / d; 
  vec2 xydu = vec2( uvdy.y, -uvdx.y ) * d;
  vec2 xydv = vec2( -uvdy.x, uvdx.x ) * d;
  vec2 p0 = gl_FragCoord.xy - ( uv.x * xydu + uv.y * xydv );
  vec2 p1 = abs(uv.x * xydu + uv.y * xydv);

  color = vec4(p1.x/640.0,p1.y/480.0,0,1);
}
</textarea>
<button class="reload">Reload</button><button class="pause">Pause</button>
</div>

<script src="js/webgl.js"></script>
<script src="js/webgl-quad.js"></script>

<script>
  run_shader('shader0');
  run_shader('shader1');
</script>

</BODY>
</HTML>


