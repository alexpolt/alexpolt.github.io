<!DOCTYPE html>
<HTML>

<HEAD>

  <title>To Move or Not to Move, Except or noexcept - Alexandr Poltavsky, software developer</title>

  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta http-equiv="Cache-Control" content="no-store" />

  <link rel="stylesheet" type="text/css" href="css/common.css" />
  <link rel="stylesheet" href="highlight/styles/hybrid.css">

</HEAD>

<BODY> 

<div id="wrap">

  <!-- header part -->

  <div id="header">

  <a href="/color-throne.html"><img class="ad" src="images/color-throne-logo-promo.png" title="Color Throne Game"/></a>    

  <a href="/">
      <img class="avatar" width="160" src="images/alexandr-poltavsky-avatar.jpeg" title="Alexandr Poltavsky" align="left"/>
    </a>
    <strong>
      Alexandr Poltavsky <br/> 
      Software developer <br/>
      <em>poltavsky.alexandr&#64;gmail.com</em> 
    </strong>
    <ul id="menu">
      <li><a href="/">Blog Contents</a></li>
      <li><a href="https://github.com/alexpolt/">Github</a></li>
      <li><a href="https://www.shadertoy.com/user/alexpolt">Shadertoy</a></li>
      <li><a href="https://twitter.com/poltavsky_alex">Twitter</a></li>
    </ul>

  </div>


  <div id="content" style="clear: left">

  <!-- here goes the main content -->

<h2>To Move or Not to Move, Except or noexcept</h2>

<p>With the introduction of move semantics into C++ one has to decide when and how
  to use it for the benefit. I have already written on the <a href="empty-value.html" title="Problems of Move Semantics in C++">problems</a> that it introduces.
  Also I came up with a clear rule for this:</p>

<ul>
<li><p>If you store on object than just use a value (no references) as a parameter. It'll deal with
both r-values and l-values correctly. This is the clear advantage that move semantics has given
us.</p></li>
<li><p>You can use copy-and-swap idiom. But there are subtleties with container like objects - you
don't wont unnecessary copies.</p></li>
<li><p>In other cases you'll end up using either a universal reference or two distinct methods/functions.</p></li>
</ul>

<!-- stop list -->

<p>Now to the question of noexcept. I've already written on the subject of <a href="exceptions.html" title="C++ Exceptions">exceptions</a> 
  and where to use them. With regard to noexcept my experience tells me that we should just forget
  about noexcept. The only case it is necessary is for std::vector or other containers ( noexcept
  on move constructor ). But this is the result of the really dubious decision to allow exceptions
  on copy and move. We should just ban exceptions in that cases and make our lives better.
  bad_alloc? Yes, memory allocation failure is a no-go situation. <strong>We write programs with an
  assumption that an OS will behave as documented. No spurious failures are allowed!</strong> No threads
  should become suddenly suspended, no memory allocation failures in case we're not out of memory,
  which is a bug of a program than a normal situation. STL went the wrong way with its exception 
  safety paranoia. So I think one should not normally use noexcept. Try to make your constructors
  and probably assignment operators noexcept by default and allow exceptions in every other case.</p>


<script src="highlight/highlight.pack.js"></script>
<script>
  //hljs.configure({languages: ["C++"]});
  hljs.initHighlightingOnLoad();
</script>


<div id="disqus_thread"></div>
<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */
    /*
    var disqus_config = function () {
        this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    if( ! document.getElementById("contents") ) // alexpolt: exclude main page with contents
    (function() {  // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        
        s.src = '//alexpolt-github-io.disqus.com/embed.js';
        
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>



  </div> <!-- end content -->

</div> <!-- end wrap -->



<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-75341409-1', 'auto');
  ga('send', 'pageview');
</script>

</BODY>

